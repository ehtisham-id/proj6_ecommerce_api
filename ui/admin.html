<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin</title>
    <!-- Tailwind CDN removed due to CDN MIME issues; using Bootstrap only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="js/api.js" defer></script>
    <script src="js/ui.js" defer></script>
    <script src="js/ui.js" defer></script>
</head>

<body class="bg-white">
    <div class="container py-4">
        <h4>Admin Dashboard</h4>
        <div id="admin-stats" class="row g-3"></div>
        <div id="revenue-chart" class="my-3"></div>
        <div id="top-products" class="row g-3"></div>
    </div>

    <script>
        (async () => {
            try {
                const [stats, revenue, topProducts] = await Promise.all([admin.stats(), admin.revenue(30), admin.topProducts()]);
                if (stats) document.getElementById('admin-stats').innerHTML = `<div class="col"><div class="card p-3">Total Revenue: $${stats.totalRevenue}</div></div><div class="col"><div class="card p-3">Orders: ${stats.totalOrders}</div></div>`;
                if (topProducts) document.getElementById('top-products').innerHTML = topProducts.map(p => `<div class="col-md-3"><div class="card p-2">${p.name}<div class="small text-muted">Sales: ${p.sales}</div></div></div>`).join('');
            } catch (e) { console.error(e); }
        })();
    </script>
</body>

</html>